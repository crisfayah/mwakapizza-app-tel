<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mwaka Pizza - Commande & Suivi</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: sans-serif; background: #000; color: #fff; padding-bottom: 40px; }
        .nav-tabs { display: flex; background: #1a1a1a; border-bottom: 3px solid #2d5f3f; position: sticky; top: 0; z-index: 100; }
        .nav-btn { flex: 1; padding: 15px; border: none; background: none; color: #888; font-weight: bold; cursor: pointer; text-transform: uppercase; }
        .nav-btn.active { color: #fff; background: #2d5f3f; }
        .header { background: #1a1a1a; padding: 20px; text-align: center; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .section { display: none; }
        .section.active { display: block; }
        .type-selector { display: flex; gap: 10px; margin-bottom: 20px; }
        .type-btn { flex: 1; padding: 15px; border-radius: 12px; border: 2px solid #333; background: #222; color: #888; cursor: pointer; font-weight: bold; font-size: 1.1em; }
        .type-btn.selected { background: #e74c3c; color: white; border-color: #e74c3c; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; color: #2d5f3f; font-weight: bold; font-size: 0.9em; text-transform: uppercase; }
        input, textarea, select { width: 100%; padding: 14px; border-radius: 10px; border: 1px solid #333; background: #1a1a1a; color: white; font-size: 16px; }
        .restaurant-choice { display: flex; gap: 10px; }
        .res-btn { flex: 1; padding: 12px; border: 1px solid #2d5f3f; background: #1a1a1a; color: #2d5f3f; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .res-btn.active { background: #2d5f3f; color: white; }
        .order-item { background: #1a1a1a; border: 1px solid #333; padding: 15px; border-radius: 15px; margin-bottom: 15px; border-left: 6px solid #2d5f3f; position: relative; }
        .btn-add { width: 100%; padding: 15px; color: white; border: none; border-radius: 10px; cursor: pointer; margin: 10px 0; font-weight: bold; background: #2d5f3f; }
        .btn-submit { width: 100%; padding: 20px; background: #e74c3c; color: white; border: none; border-radius: 15px; font-size: 20px; font-weight: bold; cursor: pointer; margin-top: 20px; }
        .total-box { background: #1a1a1a; border: 2px solid #2d5f3f; padding: 15px; border-radius: 15px; text-align: center; margin-top: 20px; font-size: 22px; font-weight: bold; }
        .delete-btn { color: #e74c3c; background: none; border: none; font-size: 12px; font-weight: bold; cursor: pointer; margin-top: 10px; text-align: right; width: 100%; }
    </style>
</head>
<body>
    <div class="nav-tabs">
        <button class="nav-btn active" onclick="showSection('orderSection', this)">Commander</button>
        <button class="nav-btn" onclick="showSection('suiviSection', this)">Suivi</button>
    </div>
    <div class="header"><h1>üçï Mwaka Pizza</h1></div>
    <div class="container">
        <div id="orderSection" class="section active">
            <div class="type-selector">
                <button type="button" class="type-btn" id="btnEmporter" onclick="setType('Emporter')">üè† Emporter</button>
                <button type="button" class="type-btn selected" id="btnLivraison" onclick="setType('Livraison')">üöó Livraison</button>
            </div>
            <form id="orderForm">
                <div id="resGroup" class="form-group" style="display:none;">
                    <label>Restaurant de retrait</label>
                    <div class="restaurant-choice">
                        <button type="button" id="btnValm" class="res-btn active" onclick="setRes('Valmeni√®re')">Valmeni√®re</button>
                        <button type="button" id="btnCentre" class="res-btn" onclick="setRes('Centre-ville')">Centre-ville</button>
                    </div>
                </div>
                <div class="form-group"><label>Nom & Pr√©nom</label><input type="text" id="clientName" required></div>
                <div id="livraisonFields">
                    <div class="form-group"><label>T√©l√©phone</label><input type="tel" id="phone"></div>
                    <div class="form-group"><label>Adresse Compl√®te</label><textarea id="address" rows="2"></textarea></div>
                    <div class="form-group">
                        <label>Mode de r√®glement</label>
                        <select id="payment">
                            <option value="Esp√®ces">Esp√®ces</option>
                            <option value="Carte Bancaire">Carte Bancaire</option>
                            <option value="Ticket Restaurant">Ticket Restaurant</option>
                        </select>
                    </div>
                </div>
                
                <label>Vos Pizzas</label>
                <div id="pizzasList"></div>
                <button type="button" class="btn-add" onclick="addPizza()">‚ûï AJOUTER UNE PIZZA</button>

                <label>Desserts & Boissons</label>
                <div id="extrasList"></div>
                <button type="button" class="btn-add" style="background:#444" onclick="addExtra()">‚ûï DESSERT / BOISSON</button>

                <div class="total-box">TOTAL : <span id="totalDisplay">0.00 ‚Ç¨</span></div>
                <button type="submit" class="btn-submit" id="submitBtn">üöÄ ENVOYER EN CUISINE</button>
            </form>
        </div>
        <div id="suiviSection" class="section"><div id="suiviList"></div></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
    <script>
        const config = { apiKey: "AIzaSyCxyNbWyEAVot0sDzBzUdbqp4tQ2jBWMS0", authDomain: "mwakaphone-e8c5b.firebaseapp.com", projectId: "mwakaphone-e8c5b", storageBucket: "mwakaphone-e8c5b.firebasestorage.app", messagingSenderId: "258049374795", appId: "1:258049374795:web:bc7863ce2f86d8a6c8abce" };
        firebase.initializeApp(config); const db = firebase.firestore();
        let currentType = 'Livraison'; let currentRes = 'Valmeni√®re';

        function setType(t) { currentType = t; document.getElementById('btnEmporter').classList.toggle('selected', t==='Emporter'); document.getElementById('btnLivraison').classList.toggle('selected', t==='Livraison'); document.getElementById('livraisonFields').style.display = t==='Livraison'?'block':'none'; document.getElementById('resGroup').style.display = t==='Emporter'?'block':'none'; }
        function setRes(r) { currentRes = r; document.getElementById('btnValm').classList.toggle('active', r==='Valmeni√®re'); document.getElementById('btnCentre').classList.toggle('active', r==='Centre-ville'); }
        function addPizza() { const div = document.createElement('div'); div.className = 'order-item'; div.innerHTML = `<div style="display:flex; gap:10px;"><select class="p-qty" style="width:70px"><option>1</option><option>2</option><option>3</option></select><input type="text" class="p-name" placeholder="Nom de la pizza..." required style="flex:1"></div><button type="button" class="delete-btn" onclick="this.parentElement.remove()">üóëÔ∏è Supprimer</button>`; document.getElementById('pizzasList').appendChild(div); }
        function addExtra() { const div = document.createElement('div'); div.className = 'order-item'; div.innerHTML = `<div style="display:flex; gap:10px;"><select class="e-qty" style="width:70px"><option>1</option><option>2</option></select><input type="text" class="e-name" placeholder="Dessert ou Boisson..." required style="flex:1">
